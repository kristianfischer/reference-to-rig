# Reference-to-Rig Engine Configuration
# Copy this file to .env and modify as needed

# Server
RTR_HOST=127.0.0.1
RTR_PORT=8000
RTR_DEBUG=false

# Paths (relative to engine directory or absolute)
RTR_DATA_DIR=./data
RTR_CAPTURE_LIBRARY_DIR=../capture_library
RTR_PROJECTS_DIR=./data/projects

# Audio
RTR_SAMPLE_RATE=48000
RTR_TARGET_LOUDNESS_LUFS=-18.0

# Matching
RTR_TOP_K_NAM_CANDIDATES=10
RTR_TOP_M_IR_CANDIDATES=10
RTR_OPTIMIZATION_ITERATIONS=50

# Backend (mock for testing, sam_audio/nam for real)
# Set to 'sam_audio' to use real SAM Audio model for guitar isolation
RTR_ISOLATION_BACKEND=mock
RTR_NAM_BACKEND=mock

# SAM Audio Configuration (when RTR_ISOLATION_BACKEND=sam_audio)
# Requires: pip install git+https://github.com/facebookresearch/sam-audio.git
# Model access: https://huggingface.co/facebook/sam-audio-large
#
# VRAM Requirements:
#   - sam-audio-small: ~1-2GB VRAM (use for 4GB cards)
#   - sam-audio-base:  ~2-3GB VRAM (use for 6GB cards)
#   - sam-audio-large: ~4-6GB VRAM (use for 8GB+ cards)
#   - Use cpu if you experience freezes/crashes
#
RTR_SAM_AUDIO_MODEL=facebook/sam-audio-small
RTR_SAM_AUDIO_DEVICE=cpu           # 'cpu' for safety, 'cuda' if 4GB+ VRAM
RTR_SAM_AUDIO_PROMPT=electric guitar
RTR_SAM_AUDIO_USE_RERANKING=true
RTR_SAM_AUDIO_RERANKING_CANDIDATES=1  # 1=fast, 4=quality

# NAM Configuration (when RTR_NAM_BACKEND=nam)
# Requires: pip install neural-amp-modeler
# Download models from: https://tonehunt.org
RTR_NAM_DEVICE=                   # Empty for auto-detect, 'cpu' for CPU-only

# Database
RTR_DB_PATH=./data/reference_to_rig.db
RTR_FAISS_INDEX_PATH=./data/faiss_index.bin

# Logging
RTR_LOG_LEVEL=INFO
RTR_LOG_FORMAT=console

